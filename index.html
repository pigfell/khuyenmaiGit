<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ROYAL CASINO - MEGA CHIPS EDITION</title>
    <style>
        :root {
            --gold: #ffcc00; --gold-dark: #b8860b; --tai: #ffd84d; --xiu: #4fc3ff; --bg: #050505; --win: #2ecc71;
            --chip-10m: #00a8ff; --chip-50m: #9c88ff; --chip-100m: #e84118; --chip-all: #fbc531;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body {
            margin: 0; background-color: var(--bg); color: #fff;
            font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background-image: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            overflow: hidden;
        }

        /* XOAY M√ÄN H√åNH */
        #orientation-warning {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 99999; flex-direction: column; justify-content: center; align-items: center;
        }
        @media screen and (max-width: 900px) and (orientation: portrait) { #orientation-warning { display: flex; } }

        /* LAYOUT 3 C·ªòT */
        .container {
            display: grid; grid-template-columns: 20vw 52vw 22vw; gap: 1vw;
            width: 98vw; height: 95vh; max-width: 1600px;
        }

        .glass-panel {
            background: rgba(20, 20, 25, 0.95); border: 1.5px solid rgba(255, 204, 0, 0.3); border-radius: 30px;
            padding: 15px; display: flex; flex-direction: column; position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,1);
        }

        /* CHAT ·∫¢O */
        .chat-box { flex: 1; overflow-y: auto; margin-top: 10px; scroll-behavior: smooth; }
        .chat-msg { margin-bottom: 8px; font-size: 13px; color: #eee; line-height: 1.4; animation: slideIn 0.3s; }
        .chat-user { font-weight: bold; margin-right: 5px; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        /* JACKPOT */
        .jp-box {
            background: linear-gradient(180deg, #900, #300); border: 2px solid var(--gold);
            border-radius: 20px; padding: 10px; text-align: center; margin-bottom: 10px;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }
        .jp-value { font-size: clamp(22px, 4.5vh, 40px); color: #fff; font-family: 'Courier New', monospace; font-weight: bold; text-shadow: 0 0 15px #f00; }
        
        #timer { font-size: clamp(35px, 6vh, 55px); font-weight: 900; color: #fff; text-shadow: 0 0 20px var(--gold); text-align: center; }

        /* B√ÅT ƒêƒ®A */
        .bowl-wrap {
            width: clamp(160px, 35vh, 230px); height: clamp(160px, 35vh, 230px);
            margin: 10px auto; background: #000; border-radius: 50%;
            border: 10px solid #222; position: relative;
            display: flex; justify-content: center; align-items: center; box-shadow: 0 0 35px var(--gold);
        }
        .lid {
            position: absolute; width: 100%; height: 100%; background: radial-gradient(circle at 35% 35%, #555, #000);
            border-radius: 50%; z-index: 10; cursor: pointer; transition: 0.8s cubic-bezier(0.6, -0.2, 0.3, 1.3);
            display: flex; justify-content: center; align-items: center; border: 1px solid #333;
        }
        .lid.open { transform: translate(140%, -100%) rotate(40deg); opacity: 0; pointer-events: none; }
        .shake-anim { animation: wiggle 0.1s infinite; }
        @keyframes wiggle { 0% { transform: translate(1px, 1px); } 50% { transform: translate(-1px, -1px); } }

        .dice { width: 50px; height: 50px; background: #fff; border-radius: 10px; color: #000; font-size: 30px; font-weight: bold; display: flex; justify-content: center; align-items: center; box-shadow: 3px 3px 0 #999; margin: 0 5px; }

        /* B√ÄN C∆Ø·ª¢C */
        .bet-area { display: flex; gap: 15px; margin-top: 10px; }
        .bet-box { flex: 1; background: rgba(255,255,255,0.03); padding: 15px; border-radius: 20px; border: 2px solid #333; cursor: pointer; text-align: center; position: relative; overflow: hidden;}
        .bet-box.selected { border-color: var(--gold); background: rgba(255, 204, 0, 0.1); }
        .bet-box.selected::before { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: radial-gradient(circle, rgba(255,204,0,0.2) 0%, transparent 70%); }
        .bet-amt-text { color: #fff; font-size: 20px; font-weight: bold; text-shadow: 0 0 12px var(--gold); }

        /* --- D√ÄN N√öT CHIP SI√äU ƒê·∫∏P --- */
        .chip-row { display: flex; justify-content: center; gap: 10px; margin-top: 15px; }
        
        .chip {
            width: 65px; height: 65px; border-radius: 50%; border: 4px dashed rgba(255,255,255,0.3);
            cursor: pointer; font-weight: 900; font-size: 14px; position: relative;
            display: flex; justify-content: center; align-items: center;
            transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 rgba(0,0,0,0.5), 0 10px 20px rgba(0,0,0,0.4);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .chip:active { transform: translateY(4px); box-shadow: 0 2px 0 rgba(0,0,0,0.5); }
        .chip:hover { transform: scale(1.1) translateY(-5px); filter: brightness(1.2); }

        .chip-10m { background: radial-gradient(circle, var(--chip-10m), #004d7c); border-color: #74b9ff; color: #fff; box-shadow: 0 6px 0 #004d7c, 0 0 15px rgba(0, 168, 255, 0.5); }
        .chip-50m { background: radial-gradient(circle, var(--chip-50m), #4834d4); border-color: #a29bfe; color: #fff; box-shadow: 0 6px 0 #4834d4, 0 0 15px rgba(156, 136, 255, 0.5); }
        .chip-100m { background: radial-gradient(circle, var(--chip-100m), #800); border-color: #ff7675; color: #fff; box-shadow: 0 6px 0 #800, 0 0 15px rgba(232, 65, 24, 0.5); }
        .chip-all { background: radial-gradient(circle, var(--chip-all), #b8860b); border-color: #ffeaa7; color: #000; text-shadow: none; box-shadow: 0 6px 0 #b8860b, 0 0 20px rgba(251, 197, 49, 0.6); }
        .chip-clear { background: #333; border-color: #666; color: #888; width: 50px; height: 50px; font-size: 11px; margin-left: 5px; }

        /* SIDE PANEL */
        #balance { color: var(--win); font-size: 22px; font-weight: bold; text-shadow: 0 0 10px rgba(46, 204, 113, 0.5); }
        .btn-dep { background: linear-gradient(180deg, #f1c40f, #d35400); color: #fff; border: none; padding: 10px; border-radius: 10px; font-weight: bold; width: 100%; cursor: pointer; margin-top: 8px; font-size: 14px; box-shadow: 0 4px 0 #8a3a00; }
        .btn-dep.disabled { background: #444; color: #888; cursor: not-allowed; box-shadow: none; }

        /* ROADMAP */
        .roadmap-container {
            margin-top: 15px; background: #000; border: 1.5px solid var(--gold);
            border-radius: 12px; padding: 5px; overflow: hidden;
            background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 18px 18px; height: 115px; display: flex; flex-wrap: wrap; align-content: flex-start; gap: 2px;
        }
        .dot { width: 16px; height: 16px; border-radius: 50%; position: relative; box-shadow: inset -2px -2px 4px rgba(0,0,0,0.4); animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .dot.tai { background: radial-gradient(circle at 30% 30%, #fff, var(--tai), #b8860b); box-shadow: 0 0 10px var(--tai); }
        .dot.xiu { background: radial-gradient(circle at 30% 30%, #fff, var(--xiu), #1e90ff); box-shadow: 0 0 10px var(--xiu); }
        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }

        #audio-starter { position: fixed; top: 10px; left: 10px; z-index: 2000; padding: 8px 15px; background: var(--gold); border: none; border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 12px; color: #000;}
    </style>
</head>
<body>

<div id="orientation-warning">
    <h2 style="color:var(--gold)">VUI L√íNG XOAY NGANG ƒêI·ªÜN THO·∫†I</h2>
</div>

<button id="audio-starter" onclick="game.enableSound()">üîä B·∫¨T NH·∫†C VIP</button>

<audio id="m-bg" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3"></audio>
<audio id="s-chip" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
<audio id="s-dice" loop src="https://www.zapsplat.com/wp-content/uploads/2015/sound-effects-one/game_die_roll_on_surface_001.mp3"></audio>
<audio id="s-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>
<audio id="s-jp" src="https://assets.mixkit.co/active_storage/sfx/2017/2017-preview.mp3"></audio>

<div class="container">
    <div class="side-panel glass-panel">
        <h3>üí¨ TR√í CHUY·ªÜN</h3>
        <div class="chat-box" id="chat-box"></div>
    </div>

    <div class="main-game glass-panel">
        <div class="jp-box">
            <div style="font-size: 10px; color: var(--gold-light); margin-bottom: 2px; letter-spacing: 2px;">üê≤ QU·ª∏ H≈® R·ªíNG üê≤</div>
            <div class="jp-value" id="jp-val">100,000,000</div>
        </div>

        <div id="timer">20</div>
        <div id="status" style="text-align:center; color:var(--gold); font-size: 12px; margin-bottom: 5px; font-weight:bold;">ƒêANG ƒê·∫∂T C∆Ø·ª¢C</div>
        
        <div class="bowl-wrap">
            <div class="lid" id="lid" onclick="game.openLid()"></div>
            <div id="d1" class="dice">?</div>
            <div id="d2" class="dice">?</div>
            <div id="d3" class="dice">?</div>
        </div>

        <div class="bet-area">
            <div class="bet-box selected" id="box-tai" onclick="game.selectSide('TAI')">
                <h2 style="color: var(--tai);">T√ÄI</h2>
                <div id="val-tai" class="bet-amt-text">0</div>
            </div>
            <div class="bet-box" id="box-xiu" onclick="game.selectSide('XIU')">
                <h2 style="color: var(--xiu);">X·ªàU</h2>
                <div id="val-xiu" class="bet-amt-text">0</div>
            </div>
        </div>

        <div class="chip-row">
            <div class="chip chip-10m" onclick="game.addMoney(10000000)">10M</div>
            <div class="chip chip-50m" onclick="game.addMoney(50000000)">50M</div>
            <div class="chip chip-100m" onclick="game.addMoney(100000000)">100M</div>
            <div class="chip chip-all" onclick="game.allIn()">ALL IN</div>
            <div class="chip chip-clear" onclick="game.clearBet()">X√ìA</div>
        </div>
    </div>

    <div class="side-panel glass-panel">
        <div style="margin-bottom: 10px;">
            <h3>üè¶ NG√ÇN H√ÄNG</h3>
            <b id="balance">1,000,000,000</b>
            <div style="margin-top: 10px;">
                <input type="number" id="inp-dep" placeholder="N·∫°p t·ªëi ƒëa 10 t·ª∑" style="width: 100%; padding: 10px; background:#000; border:1px solid #444; color:#fff; border-radius:8px; margin-bottom: 5px; text-align: center; font-weight: bold;">
                <button id="btn-dep" class="btn-dep" onclick="game.deposit()">N·∫†P TI·ªÄN</button>
            </div>
        </div>
        <div style="flex: 1; display: flex; flex-direction: column;">
            <h3>üìä SOI C·∫¶U (ROADMAP)</h3>
            <div class="roadmap-container" id="hist-dots"></div>
        </div>
    </div>
</div>

<canvas id="fw-canvas" style="position:fixed; top:0; left:0; pointer-events:none; z-index:9999;"></canvas>

<script>
class CasinoGame {
    constructor() {
        this.bal = 1000000000;
        this.jp = 100000000;
        this.time = 20;
        this.state = 'BET'; 
        this.side = 'TAI';
        this.bT = 0; this.bX = 0;
        this.h = [];
        this.isMuted = true;
        this.streak = 0; this.lastRes = null;

        this.init();
        this.startChat();
    }

    init() {
        this.updateUI();
        setInterval(() => {
            if(this.state === 'BET') {
                this.time--;
                if(this.time <= 0) {
                    this.state = 'WAIT';
                    this.lockAndShake();
                }
            }
            document.getElementById('timer').innerText = this.state === 'BET' ? this.time : "!";
        }, 1000);
    }

    enableSound() { this.isMuted = false; document.getElementById('m-bg').volume = 0.2; document.getElementById('m-bg').play(); document.getElementById('audio-starter').style.display = 'none'; }
    playSfx(id, loop = false) { if(!this.isMuted) { const el = document.getElementById(id); el.currentTime = 0; el.loop = loop; el.play(); } }
    stopSfx(id) { document.getElementById(id).pause(); document.getElementById(id).currentTime = 0; }

    lockAndShake() {
        document.getElementById('status').innerText = "H·∫æT GI·ªú! M·ªúI M·ªû B√ÅT";
        document.getElementById('lid').classList.add('shake-anim');
        this.playSfx('s-dice', true);
        this.res = this.genResult();
    }

    selectSide(s) { if(this.state === 'BET') { this.side = s; this.updateUI(); } }

    addMoney(m) {
        if(this.state !== 'BET' || this.bal < m) return;
        this.playSfx('s-chip');
        if(this.side === 'TAI') this.bT += m; else this.bX += m;
        this.bal -= m; this.jp += m * 0.001; this.updateUI();
    }

    allIn() { this.addMoney(this.bal); }
    clearBet() { if(this.state === 'BET') { this.bal += (this.bT + this.bX); this.bT = 0; this.bX = 0; this.updateUI(); } }

    openLid() {
        if(this.state !== 'WAIT') return;
        this.stopSfx('s-dice');
        document.getElementById('lid').classList.remove('shake-anim');
        document.getElementById('lid').classList.add('open');
        this.state = 'ANIM';
        let c = 0;
        let shuffle = setInterval(() => {
            document.getElementById('d1').innerText = Math.floor(Math.random()*6)+1;
            document.getElementById('d2').innerText = Math.floor(Math.random()*6)+1;
            document.getElementById('d3').innerText = Math.floor(Math.random()*6)+1;
            if(++c > 15) { clearInterval(shuffle); this.finalize(); }
        }, 80);
    }

    genResult() {
        let isJp = Math.random() < 0.01;
        let d = [1,1,1];
        if(isJp) { let n = Math.floor(Math.random()*6)+1; d = [n,n,n]; }
        else {
            let win = Math.random() < 0.5 ? 'TAI' : 'XIU';
            let target = win === 'TAI' ? (Math.floor(Math.random()*7)+11) : (Math.floor(Math.random()*8)+3);
            let cur = 3;
            while(cur < target) { let i = Math.floor(Math.random()*3); if(d[i]<6){d[i]++; cur++;} }
            if(d[0]===d[1] && d[1]===d[2]) d[0] = (d[0]===6)?5:d[0]+1;
        }
        let sum = d[0]+d[1]+d[2];
        return { dice: d, sum, win: sum >= 11 ? 'TAI' : 'XIU', isJp };
    }

    finalize() {
        const r = this.res;
        document.getElementById('d1').innerText = r.dice[0];
        document.getElementById('d2').innerText = r.dice[1];
        document.getElementById('d3').innerText = r.dice[2];

        if(r.isJp) {
            this.playSfx('s-jp');
            this.bal += this.jp; this.jp = 100000000;
        } else {
            let win = (r.win === 'TAI') ? this.bT * 2 : this.bX * 2;
            if(win > 0) { this.bal += win; this.playSfx('s-win'); }
        }

        if(r.win === this.lastRes) this.streak++; else { this.streak = 1; this.lastRes = r.win; }
        this.h.push(r.win);
        this.updateUI();
        document.getElementById('status').innerText = `K·∫æT QU·∫¢: ${r.win} (${r.sum})`;
        this.state = 'RESULT';
        setTimeout(() => this.reset(), 5000);
    }

    reset() {
        this.state = 'BET'; this.time = 20; this.bT = 0; this.bX = 0;
        document.getElementById('lid').classList.remove('open');
        document.getElementById('status').innerText = "ƒêANG CH·ªú ƒê·∫∂T C∆Ø·ª¢C";
        document.getElementById('d1').innerText = "?"; document.getElementById('d2').innerText = "?"; document.getElementById('d3').innerText = "?";
        this.updateUI();
    }

    updateUI() {
        document.getElementById('balance').innerText = this.bal.toLocaleString();
        document.getElementById('jp-val').innerText = Math.floor(this.jp).toLocaleString();
        document.getElementById('val-tai').innerText = this.bT.toLocaleString();
        document.getElementById('val-xiu').innerText = this.bX.toLocaleString();
        document.getElementById('box-tai').className = this.side === 'TAI' ? 'bet-box selected' : 'bet-box';
        document.getElementById('box-xiu').className = this.side === 'XIU' ? 'bet-box selected' : 'bet-box';
        document.getElementById('hist-dots').innerHTML = this.h.slice(-30).map(i => `<div class="dot ${i.toLowerCase()}"></div>`).join('');
        
        const btn = document.getElementById('btn-dep');
        if(this.bal > 0) { btn.classList.add('disabled'); btn.innerText = "C√íN TI·ªÄN..."; }
        else { btn.classList.remove('disabled'); btn.innerText = "N·∫†P TI·ªÄN"; }
    }

    deposit() {
        if(this.bal > 0) return;
        let a = parseInt(document.getElementById('inp-dep').value);
        if(a > 0) { this.bal += Math.min(a, 10000000000); this.playSfx('s-chip'); document.getElementById('inp-dep').value = ""; this.updateUI(); }
    }

    startChat() {
        const msgs = ["B·ªãp vcl admin", "L·∫°i x·ªâu, v√£i c·∫ßu", "H√∫p 200 c·ªß th∆°m", "C·∫ßu b·ªát ƒë·∫πp vcl", "Ch√°y t√∫i r admin ∆°i", "T√†i ƒëi anh em", "Admin b·ªãp v√£i l", "N·ªï h≈© c√°i coi", "Vcl c·∫ßu g√¨ ƒë√¢y"];
        const prefixes = ["Vua", "Th√°nh", "Tr√πm", "B√©", "C√¥", "Ch√∫", "ƒê·∫°iGia"];
        const names = ["T√†i", "X·ªâu", "B·ªãp", "H√∫p", "L√¥", "ƒê·ªÅ"];
        setInterval(() => {
            const div = document.createElement('div');
            div.className = 'chat-msg';
            const user = prefixes[Math.floor(Math.random()*prefixes.length)] + names[Math.floor(Math.random()*names.length)] + Math.floor(Math.random()*999);
            div.innerHTML = `<span class="chat-user" style="color:var(--gold)">${user}:</span> ${msgs[Math.floor(Math.random()*msgs.length)]}`;
            const box = document.getElementById('chat-box');
            box.appendChild(div);
            if(box.children.length > 40) box.removeChild(box.firstChild);
            box.scrollTop = box.scrollHeight;
        }, 2200);
    }
}
const game = new CasinoGame();
</script>
</body>
</html>
